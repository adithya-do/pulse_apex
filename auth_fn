create or replace function apex_auth_fn(p_username in varchar2, p_password in varchar2)
  return boolean
is
  l_uid number;
begin
  l_uid := auth_pkg.login(p_login => p_username, p_password => p_password);
  if l_uid is not null then
    apex_util.set_session_state('APP_USER_ID', l_uid);
    return true;
  else
    return false;
  end if;
end;
/



exists (
  select 1
    from app_user_roles r
    join app_roles a on a.role_id = r.role_id
   where r.user_id = :APP_USER_ID
     and a.code = 'ADMIN'
)


exists (
  select 1
    from app_user_modules um
    join app_modules m on m.module_id = um.module_id
   where um.user_id = :APP_USER_ID
     and m.code = 'ORA_DB'
)
